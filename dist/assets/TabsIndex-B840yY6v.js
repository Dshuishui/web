import{bk as Te,c5 as Ne,aR as Pe,z as L,X as J,Y as ce,d as A,W as Q,ad as Z,A as D,r as g,i as z,O as ee,aB as ue,o as te,c as ae,G as de,H as O,I as we,L as be,a8 as K,c6 as $e,c7 as xe,B as F,at as ve,au as Ee,b as i,V as I,a6 as Se,a7 as Be,be as Oe,P as M,a9 as ke,D as j,c8 as Re,aG as oe,aI as ze,C as Ae,b6 as Ve,c9 as le,h as Ie,av as Me,E as Fe,K as Le,a1 as De,M as Ke,aJ as Ue,w as X,e as re,_ as He}from"./index-BD3Dc5cV.js";import{c as k,U as fe}from"./event-BmKe2YpZ.js";const We=(e,a,c)=>Ne(e.subTree).filter(t=>{var u;return Pe(t)&&((u=t.type)==null?void 0:u.name)===a&&!!t.component}).map(t=>t.component.uid).map(t=>c[t]).filter(t=>!!t),qe=(e,a)=>{const c={},_=Te([]);return{children:_,addChild:u=>{c[u.uid]=u,_.value=We(e,a,c)},removeChild:u=>{delete c[u],_.value=_.value.filter(x=>x.uid!==u)}}},U=Symbol("tabsRootContextKey"),Ge=L({tabs:{type:J(Array),default:()=>ce([])}}),me="ElTabBar",Xe=A({name:me}),Ye=A({...Xe,props:Ge,setup(e,{expose:a}){const c=e,_=K(),o=Q(U);o||Z(me,"<el-tabs><el-tab-bar /></el-tabs>");const t=D("tabs"),u=g(),x=g(),v=()=>{let b=0,w=0;const f=["top","bottom"].includes(o.props.tabPosition)?"width":"height",l=f==="width"?"x":"y",B=l==="x"?"left":"top";return c.tabs.every(s=>{var p,$;const N=($=(p=_.parent)==null?void 0:p.refs)==null?void 0:$[`tab-${s.uid}`];if(!N)return!1;if(!s.active)return!0;b=N[`offset${k(B)}`],w=N[`client${k(f)}`];const E=window.getComputedStyle(N);return f==="width"&&(c.tabs.length>1&&(w-=Number.parseFloat(E.paddingLeft)+Number.parseFloat(E.paddingRight)),b+=Number.parseFloat(E.paddingLeft)),!1}),{[f]:`${w}px`,transform:`translate${k(l)}(${b}px)`}},m=()=>x.value=v();return z(()=>c.tabs,async()=>{await ee(),m()},{immediate:!0}),ue(u,()=>m()),a({ref:u,update:m}),(b,w)=>(te(),ae("div",{ref_key:"barRef",ref:u,class:de([O(t).e("active-bar"),O(t).is(O(o).props.tabPosition)]),style:we(x.value)},null,6))}});var je=be(Ye,[["__file","tab-bar.vue"]]);const Je=L({panes:{type:J(Array),default:()=>ce([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),Qe={tabClick:(e,a,c)=>c instanceof Event,tabRemove:(e,a)=>a instanceof Event},ie="ElTabNav",Ze=A({name:ie,props:Je,emits:Qe,setup(e,{expose:a,emit:c}){const _=K(),o=Q(U);o||Z(ie,"<el-tabs><tab-nav /></el-tabs>");const t=D("tabs"),u=$e(),x=xe(),v=g(),m=g(),b=g(),w=g(),f=g(!1),l=g(0),B=g(!1),s=g(!0),p=F(()=>["top","bottom"].includes(o.props.tabPosition)?"width":"height"),$=F(()=>({transform:`translate${p.value==="width"?"X":"Y"}(-${l.value}px)`})),N=()=>{if(!v.value)return;const r=v.value[`offset${k(p.value)}`],d=l.value;if(!d)return;const n=d>r?d-r:0;l.value=n},E=()=>{if(!v.value||!m.value)return;const r=m.value[`offset${k(p.value)}`],d=v.value[`offset${k(p.value)}`],n=l.value;if(r-n<=d)return;const C=r-n>d*2?n+d:r-d;l.value=C},V=async()=>{const r=m.value;if(!f.value||!b.value||!v.value||!r)return;await ee();const d=b.value.querySelector(".is-active");if(!d)return;const n=v.value,C=["top","bottom"].includes(o.props.tabPosition),T=d.getBoundingClientRect(),y=n.getBoundingClientRect(),S=C?r.offsetWidth-y.width:r.offsetHeight-y.height,P=l.value;let h=P;C?(T.left<y.left&&(h=P-(y.left-T.left)),T.right>y.right&&(h=P+T.right-y.right)):(T.top<y.top&&(h=P-(y.top-T.top)),T.bottom>y.bottom&&(h=P+(T.bottom-y.bottom))),h=Math.max(h,0),l.value=Math.min(h,S)},se=()=>{var r;if(!m.value||!v.value)return;e.stretch&&((r=w.value)==null||r.update());const d=m.value[`offset${k(p.value)}`],n=v.value[`offset${k(p.value)}`],C=l.value;n<d?(f.value=f.value||{},f.value.prev=C,f.value.next=C+n<d,d-C<n&&(l.value=d-n)):(f.value=!1,C>0&&(l.value=0))},_e=r=>{const d=r.code,{up:n,down:C,left:T,right:y}=M;if(![n,C,T,y].includes(d))return;const S=Array.from(r.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),P=S.indexOf(r.target);let h;d===T||d===n?P===0?h=S.length-1:h=P-1:P<S.length-1?h=P+1:h=0,S[h].focus({preventScroll:!0}),S[h].click(),ne()},ne=()=>{s.value&&(B.value=!0)},H=()=>B.value=!1;return z(u,r=>{r==="hidden"?s.value=!1:r==="visible"&&setTimeout(()=>s.value=!0,50)}),z(x,r=>{r?setTimeout(()=>s.value=!0,50):s.value=!1}),ue(b,se),ve(()=>setTimeout(()=>V(),0)),Ee(()=>se()),a({scrollToActiveTab:V,removeFocus:H}),z(()=>e.panes,()=>_.update(),{flush:"post",deep:!0}),()=>{const r=f.value?[i("span",{class:[t.e("nav-prev"),t.is("disabled",!f.value.prev)],onClick:N},[i(I,null,{default:()=>[i(Se,null,null)]})]),i("span",{class:[t.e("nav-next"),t.is("disabled",!f.value.next)],onClick:E},[i(I,null,{default:()=>[i(Be,null,null)]})])]:null,d=e.panes.map((n,C)=>{var T,y,S,P;const h=n.uid,W=n.props.disabled,q=(y=(T=n.props.name)!=null?T:n.index)!=null?y:`${C}`,G=!W&&(n.isClosable||e.editable);n.index=`${C}`;const ye=G?i(I,{class:"is-icon-close",onClick:R=>c("tabRemove",n,R)},{default:()=>[i(Oe,null,null)]}):null,ge=((P=(S=n.slots).label)==null?void 0:P.call(S))||n.props.label,Ce=!W&&n.active?0:-1;return i("div",{ref:`tab-${h}`,class:[t.e("item"),t.is(o.props.tabPosition),t.is("active",n.active),t.is("disabled",W),t.is("closable",G),t.is("focus",B.value)],id:`tab-${q}`,key:`tab-${h}`,"aria-controls":`pane-${q}`,role:"tab","aria-selected":n.active,tabindex:Ce,onFocus:()=>ne(),onBlur:()=>H(),onClick:R=>{H(),c("tabClick",n,q,R)},onKeydown:R=>{G&&(R.code===M.delete||R.code===M.backspace)&&c("tabRemove",n,R)}},[ge,ye])});return i("div",{ref:b,class:[t.e("nav-wrap"),t.is("scrollable",!!f.value),t.is(o.props.tabPosition)]},[r,i("div",{class:t.e("nav-scroll"),ref:v},[i("div",{class:[t.e("nav"),t.is(o.props.tabPosition),t.is("stretch",e.stretch&&["top","bottom"].includes(o.props.tabPosition))],ref:m,style:$.value,role:"tablist",onKeydown:_e},[e.type?null:i(je,{ref:w,tabs:[...e.panes]},null),d])])])}}}),et=L({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:J(Function),default:()=>!0},stretch:Boolean}),Y=e=>ze(e)||Ae(e),tt={[fe]:e=>Y(e),tabClick:(e,a)=>a instanceof Event,tabChange:e=>Y(e),edit:(e,a)=>["remove","add"].includes(a),tabRemove:e=>Y(e),tabAdd:()=>!0},at=A({name:"ElTabs",props:et,emits:tt,setup(e,{emit:a,slots:c,expose:_}){var o;const t=D("tabs"),{children:u,addChild:x,removeChild:v}=qe(K(),"ElTabPane"),m=g(),b=g((o=e.modelValue)!=null?o:"0"),w=async(s,p=!1)=>{var $,N,E;if(!(b.value===s||oe(s)))try{await(($=e.beforeLeave)==null?void 0:$.call(e,s,b.value))!==!1&&(b.value=s,p&&(a(fe,s),a("tabChange",s)),(E=(N=m.value)==null?void 0:N.removeFocus)==null||E.call(N))}catch{}},f=(s,p,$)=>{s.props.disabled||(w(p,!0),a("tabClick",s,$))},l=(s,p)=>{s.props.disabled||oe(s.props.name)||(p.stopPropagation(),a("edit",s.props.name,"remove"),a("tabRemove",s.props.name))},B=()=>{a("edit",void 0,"add"),a("tabAdd")};return z(()=>e.modelValue,s=>w(s)),z(b,async()=>{var s;await ee(),(s=m.value)==null||s.scrollToActiveTab()}),ke(U,{props:e,currentName:b,registerPane:x,unregisterPane:v}),_({currentName:b}),()=>{const s=c["add-icon"],p=e.editable||e.addable?i("span",{class:t.e("new-tab"),tabindex:"0",onClick:B,onKeydown:E=>{E.code===M.enter&&B()}},[s?j(c,"add-icon"):i(I,{class:t.is("icon-plus")},{default:()=>[i(Re,null,null)]})]):null,$=i("div",{class:[t.e("header"),t.is(e.tabPosition)]},[p,i(Ze,{ref:m,currentName:b.value,editable:e.editable,type:e.type,panes:u.value,stretch:e.stretch,onTabClick:f,onTabRemove:l},null)]),N=i("div",{class:t.e("content")},[j(c,"default")]);return i("div",{class:[t.b(),t.m(e.tabPosition),{[t.m("card")]:e.type==="card",[t.m("border-card")]:e.type==="border-card"}]},[...e.tabPosition!=="bottom"?[$,N]:[N,$]])}}}),st=L({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),nt=["id","aria-hidden","aria-labelledby"],pe="ElTabPane",ot=A({name:pe}),lt=A({...ot,props:st,setup(e){const a=e,c=K(),_=Ve(),o=Q(U);o||Z(pe,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const t=D("tab-pane"),u=g(),x=F(()=>a.closable||o.props.closable),v=le(()=>{var l;return o.currentName.value===((l=a.name)!=null?l:u.value)}),m=g(v.value),b=F(()=>{var l;return(l=a.name)!=null?l:u.value}),w=le(()=>!a.lazy||m.value||v.value);z(v,l=>{l&&(m.value=!0)});const f=Ie({uid:c.uid,slots:_,props:a,paneName:b,active:v,index:u,isClosable:x});return ve(()=>{o.registerPane(f)}),Me(()=>{o.unregisterPane(f.uid)}),(l,B)=>O(w)?Fe((te(),ae("div",{key:0,id:`pane-${O(b)}`,class:de(O(t).b()),role:"tabpanel","aria-hidden":!O(v),"aria-labelledby":`tab-${O(b)}`},[j(l.$slots,"default")],10,nt)),[[Le,O(v)]]):De("v-if",!0)}});var he=be(lt,[["__file","tab-pane.vue"]]);const rt=Ke(at,{TabPane:he}),it=Ue(he),ct={class:"tabs-container"},ut=A({__name:"TabsIndex",setup(e){const a=g("one");return(c,_)=>{const o=it,t=rt;return te(),ae("div",ct,[i(t,{modelValue:a.value,"onUpdate:modelValue":_[0]||(_[0]=u=>a.value=u),class:"common-tabs"},{default:X(()=>[i(o,{label:"标签1",name:"one"},{default:X(()=>[re("内容1")]),_:1}),i(o,{label:"标签2",name:"two"},{default:X(()=>[re("内容2")]),_:1})]),_:1},8,["modelValue"])])}}}),vt=He(ut,[["__scopeId","data-v-e2e90e28"]]);export{vt as default};
